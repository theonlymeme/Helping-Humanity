<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="css/hmapper.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>House designing</title>
</head>
<body>
    <div class="displayRows">

        <!-- Main Page -->
        <div class="HomeMapper">
            <h1 class="title">HomeMapper</h1>
            <!-- Gets our canvas -->
            <div id="mapSize"></div>
            <!-- Makes our buttons -->
            <button class="button button1" onclick="roomBox()">Make room</button>
            <button class="button button2" onclick="furniture(event)">Make furniture</button>
            <!-- This is for the drop-down menu that is currently not working -->
                <div class="button2-content">
                        <a onclick="triangle()"> Triangle </a>
                        <a onclick="circle()"> Circle </a>
                        <a onclick="square()"> Square </a>

                    <!-- <select>
                        <option value="triangle" onclick="triangle()"> Triangle </a>
                        <option value="circle" onclick="circle()"> Circle </a>
                        <option value="square" onclick="square()"> Square </a>
                    </select> -->
                </div>
            <button class="button button4" onclick="alert('Sorry, this feature is not implemented yet!')">Make stairs</button>
            <button class="button button3" onclick="alert('Sorry, this feature is not implemented yet!')">Make door</button>
            <button class="button button5" onclick="reset()">Reset</button>
            <button class="button button6" onclick="window.location.href='index.html'">Back to Main Page</button>
            <h2 id="infoRoom" style="display:none">now click then drag.</h2>
            <h3 class="deleteRule">To delete last object, just right click!</h3>
        </div>
    
        <!-- Instructions -->
        <div class="Instructions">
            <h1 class="title">How to use the HomeMapper</h1>
            <p class="howToUse">To use the HomeMapper, all you have to do is press a button for any of the following items that are currently available: “Make Room”, and “Make Furniture”. Once you have selected that particular item, you will want to draw the object on the canvas in the desired location that you wanted to. BUT! Make sure that you carefully rearrange it and resize it as it should, otherwise you will potentially mess things up. Once you have found the correct size of your room, click on the canvas again to finish drawing that object in place. But, please be sure that you will only get one try at it, because once you finish placing that object, it will not be movable anymore. If you want to remove an object, click on the delete button and simply right click on that last selected object. That object will completely vanish afterwards.<br><br>To refresh the page, simply click on the Reset button. That will reload the page. Nuff said.</p>
    
            <details class="howToMake">
                <summary>Making Rooms</summary>
                <p>Please insert information here</p>
            </details>
            <br>
            <details class="howToMake">
                <summary>Making Furnitures</summary>
                <p>Please insert information here</p>
            </details>
            <br>
            <details class="howToMake">
                <summary>Making Stairs</summary>
                <p>Please insert information here</p>
            </details>
            <br>
            <details class="howToMake">
                <summary>Making Doors</summary>
                <p>Please insert information here</p>
            </details>
        </div>
    </div>
 
    <script >
/*----Start of main function---------*/
    function roomBox(){
         x=document.getElementById("mapSize")
        document.getElementById("infoRoom").style.display="block";
         drawSquare(document.getElementById('mapSize'));
         console.log("clicked roomMaker");
    }
   function reset(){
    self.location.replace(location)
   }
   function furniture(){
    x=document.getElementById("mapSize")
        document.getElementById("infoRoom").style.display="block";
         drawshape(document.getElementById('mapSize'));
         console.log("clicked roomMaker");   }
/*----End of main function---------*/
var i = 0
function drawshape(mapSize) {
    function setMousePosition(e) {
        var ev = e || window.event; //Moz || IE
        if (ev.pageX) { //Moz
            mouse.x = ev.pageX + window.pageXOffset;
            mouse.y = ev.pageY + window.pageYOffset;
        } else if (ev.clientX) { //IE
            mouse.x = ev.clientX + document.body.scrollLeft;
            mouse.y = ev.clientY + document.body.scrollTop;
        }
    };

    var mouse = {
        x: 0,
        y: 0,
        startX: 0,
        startY: 0
    };
    var element = null;

    mapSize.onmousemove = function () {
        setMousePosition();
        if (element !== null) {
            element.style.width = Math.abs(mouse.x - mouse.startX) + 'px';
            element.style.height = Math.abs(mouse.y - mouse.startY) + 'px';
            element.style.left = (mouse.x - mouse.startX < 0) ? mouse.x + 'px' : mouse.startX + 'px';
            element.style.top = (mouse.y - mouse.startY < 0) ? mouse.y + 'px' : mouse.startY + 'px';
    }

    mapSize.onclick = function () {
        if (element !== null) {
            
            element = null;
            mapSize.style.cursor = "block";
            console.log("finished.");
            element = !null
            document.getElementById("infoRoom").style.display="none";
            
        } else {
            console.log("begun.");
            mouse.startX = mouse.x;
            mouse.startY = mouse.y;
            //below is Element variable
            element = document.createElement('input');

            element.style.horizantalAlign="center"
            element.className = 'shape';
            element.style.fontSize="20px"
            element.style.left = mouse.x + 'px';
            element.style.top = mouse.y + 'px';
            element.style.borderRadius = '50%';
            element.id =("-div-"+ (i+=1))
            mapSize.appendChild(element)
            mapSize.style.cursor = "crosshair";
        }
    }
        oncontextmenu=function(e){
            var eList = document.getElementsByClassName("shape");
            var last = eList.length-1;
            e.preventDefault()
            eList[last].remove();
        }
    }
}
function drawSquare(mapSize) {
    function setMousePosition(e) {
        var ev = e || window.event; //Moz || IE
        if (ev.pageX) { //Moz
            mouse.x = ev.pageX + window.pageXOffset;
            mouse.y = ev.pageY + window.pageYOffset;
        } else if (ev.clientX) { //IE
            mouse.x = ev.clientX + document.body.scrollLeft;
            mouse.y = ev.clientY + document.body.scrollTop;
        }
    };

    var mouse = {
        x: 0,
        y: 0,
        startX: 0,
        startY: 0
    };
    var element = null;

    mapSize.onmousemove = function () {
        setMousePosition();
        if (element !== null) {
            element.style.width = Math.abs(mouse.x - mouse.startX) + 'px';
            element.style.height = Math.abs(mouse.y - mouse.startY) + 'px';
            element.style.left = (mouse.x - mouse.startX < 0) ? mouse.x + 'px' : mouse.startX + 'px';
            element.style.top = (mouse.y - mouse.startY < 0) ? mouse.y + 'px' : mouse.startY + 'px';
    }

    mapSize.onclick = function () {
        if (element !== null) {
            
            element = null;
            mapSize.style.cursor = "block";
            console.log("finished.");
            element = !null
            document.getElementById("infoRoom").style.display="none";
            
        } else {
            console.log("begun.");
            mouse.startX = mouse.x;
            mouse.startY = mouse.y;
            //below is Element variable
            element = document.createElement('input');

            element.style.horizantalAlign="center"
            element.className = 'shape';
            element.style.fontSize="20px"
            element.style.left = mouse.x + 'px';
            element.style.top = mouse.y + 'px';
            element.id =("-div-"+ (i+=1))
            mapSize.appendChild(element)
            mapSize.style.cursor = "crosshair";
        }
    }
        oncontextmenu=function(e){
            var eList = document.getElementsByClassName("shape");
            var last = eList.length-1;
            e.preventDefault()
            eList[last].remove();
        }
    }
}





document.getElementById("mapSize").onclick=function(e){
    getPosition(e); 
}
</script>

</body>

</html>